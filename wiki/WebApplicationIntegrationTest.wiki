#labels Phase-Implementation
<wiki:toc max_depth="3" />

#summary Web application Integration Test.

= Introduction =

To test a web application all is needed is a class that extends from IntegrationTest and a minimal annotation configuration for the http embbeded server. There are two embbeded servers to choose from:

Jetty : @JettyServiceConfiguration(webApplication, port, host)

Tomcat: @TomcatServiceConfiguration(webApplications, port, host).


== Using Jetty == 

{{{

@JettyServiceConfiguration(webApplication="src/main/resources/webapp/test")

port: embedded web server listener port.

root: web application root context (/test by default).

webApplication: actual folder location of the web application.

}}}

Can be executed as a standard JUnit4 test from Eclipse or from Maven or Ant.


{{{
//Assert Http Test Module.
import static org.jsemantic.jintegration.test.http.Assert.*;

@JettyServiceConfiguration(webApplication="src/it/resources/webapps/test")

public class EmbeddedIntegrationHttpTest extends IntegrationTest {
	
	@Test
	public void testContextPath() {
		assertNotNull(getWebApplicationContext());
		assertNotNullContextPath();
		assertEqualsContextPath("/test");
		assertNotNull(getHttpClient());
	}

	@Test
	public void testRequest() {
		String uri = "http://localhost:9006/test/index.html";
		
		assertRequestStatusOK200(uri);
		assertContentNotEmpty(uri);
	}
	
	@Test
	public void testPost() {
		String uri = "http://localhost:9006/test/index.html";
		assertContentNotEmpty(uri);
		assertPostStatusOK200(uri);
	}
	
	@Test
	public void testError() {
		String uri = "http://localhost:9006/test/noexists.html";
		assertRequestStatusNotFound404(uri);
	}
}
}}}


== Using Tomcat == 

{{{

@TomcatServiceConfiguration(webApplication="src/main/resources/webapp/test")

port: embedded web server listener port.

root: web application root context (/test by default).

webApplications: actual folder location of the web applications.

}}}

{{{

@TomcatServiceConfiguration(webApplications = "src/it/resources/webapps")

public class IntegrationTomcatTest  extends IntegrationTest {

	@Test
	public void testContextPath() {
		assertNotNull(getHttpClient());
	}

	@Test
	public void testRequest() {
		String uri = "http://localhost:9006/spring/controller";
		assertRequestStatusOK200(uri);
	}
	@Test
	public void testPost() {
		String uri = "http://localhost:9006/spring/controller";
		assertPostStatusOK200(uri);
	}
	
	@Test
	public void testError() {
		String uri = "http://localhost:9006/spring/notexists";
		assertRequestStatusNotFound404(uri);
	}
	
}

}}}