#labels Phase-Implementation
<wiki:toc max_depth="3" />

#summary Web application Integration Test.

= Introduction =

To test a web application you can use the general guidelines given in the how to start section:

- Create a POJO class that extends from IntegrationTest.

- Annotate the class with the needed annotations. This time you would need to choose between the 2 web servers provided:


  * Jetty : @JettyServiceConfiguration(webApplication, port, host, root)

  * Tomcat: @TomcatServiceConfiguration(webApplications, port, host, root).


- Create the test methods and annotate them with @Test.

All the annotations relies on default, except of course the minimum needed parameters. In this case would be webApplication(jetty) and webApplications(tomcat).


== Jetty Annotation == 


@JettyServiceConfiguration(webApplication, port, host, root)

  * _port:_ web server listening port (9006 by default).

  * _root:_ web application root context (/test by default).

  * _webApplication:_ actual folder location of the web application (needed).

  * _host:_ application host (by default localhost).


Can be ran as a standard JUnit4 test from Eclipse, Maven, Hudson etc...


{{{

//Assert Http Test Module.
import static org.jsemantic.jintegration.test.http.Assert.*;

@JettyServiceConfiguration(webApplication="src/it/resources/webapps/test")

public class WebIntegrationTest extends IntegrationTest {
	
	@Test
	public void testContextPath() {
		assertNotNull(getWebApplicationContext());
		assertNotNullContextPath();
		assertEqualsContextPath("/test");
		assertNotNull(getHttpClient());
	}

	@Test
	public void testRequest() {
		String uri = "http://localhost:9006/test/index.html";
		
		assertRequestStatusOK200(uri);
		assertContentNotEmpty(uri);
	}
	
	@Test
	public void testPost() {
		String uri = "http://localhost:9006/test/index.html";
		assertContentNotEmpty(uri);
		assertPostStatusOK200(uri);
	}
	
	@Test
	public void testError() {
		String uri = "http://localhost:9006/test/noexists.html";
		assertRequestStatusNotFound404(uri);
	}
}
}}}


== Tomcat Annotation == 


@TomcatServiceConfiguration(webApplications, port, host, root)

  * _port:_ embedded web server listener port (9006 by default).

  * _root:_ web application root context (/test by default).

  * _webApplications:_ actual folder location of the web applications (needed).

  * _host:_ application host (by default localhost).


{{{

@TomcatServiceConfiguration(webApplications = "src/it/resources/webapps")

public class IntegrationTomcatTest  extends IntegrationTest {

	@Test
	public void testContextPath() {
		assertNotNull(getHttpClient());
	}

	@Test
	public void testRequest() {
		String uri = "http://localhost:9006/spring/controller";
		assertRequestStatusOK200(uri);
	}
	@Test
	public void testPost() {
		String uri = "http://localhost:9006/spring/controller";
		assertPostStatusOK200(uri);
	}
	
	@Test
	public void testError() {
		String uri = "http://localhost:9006/spring/notexists";
		assertRequestStatusNotFound404(uri);
	}
	
}

== Web Assert Module == 

}}}